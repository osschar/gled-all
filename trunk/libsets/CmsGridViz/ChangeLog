2011-10-13  Matevz Tadel  <matevz.tadel@ijs.si>

	* Glasses/XrdMonSucker.cxx:
	Do not filter nagios records by default.
	Support also "old" auth record format.

2011-10-10  Matevz Tadel  <matevz.tadel@ijs.si>

	Expand in sync with development in xrootd.

	* CmsGridViz/XrdXrootdMonData.h:
	Update for changes in vector read monitoring in xrootd.

	* Glasses/XrdFileCloseReporter.cxx:
	Write out user group as user_fqan.

	* Glasses/XrdMonSucker.cxx:
	Add processing of group info in auth monitoring message.
	Add prelimiary processing of vector-read traces.

	* Glasses/XrdUser.cxx:
	* Glasses/XrdUser.h:
	Add member TString mGroup.

2011-10-10  Matevz Tadel  <matevz.tadel@ijs.si>

	* Glasses/XrdMonSucker.cxx:
	Reset XrdServer-stored seq-id after mismatch.
	Add time and server-name to seq-id mismatch warning.

2011-10-10  Matevz Tadel  <matevz.tadel@ijs.si>

	* Glasses/XrdMonSucker.cxx:
	* Glasses/XrdMonSucker.h:
	Add dedicated list holding currently opened files.

2011-10-06  Matevz Tadel  <matevz.tadel@ijs.si>

	Fixes for production readiness of Gratia dumper.

	* Glasses/XrdFileCloseReporter.cxx:
	Add "xrd-" prefix to unique id.

	* Glasses/XrdMonSucker.cxx:
	* Glasses/XrdMonSucker.h:
	Set element FID for self and for domain-list.
	Set keep-sorted flag in domain-list.
	Reverse domain/host order in XrdServer name.
	Add initialization / check / warning for server sequence-id.
	Fix a byte - Mbyte conversion.
	Fix reading of "bytes-written" offset out of trace message.

	* Glasses/XrdServer.h:
	Add sequence-id data-member and init/query functions.
	Fix a byte - Mbyte conversion.

2011-10-05  Alja Mrak-Tadel  <Alja.Mrak.Tadel@cern.ch>

	* Glasses/XrdMonSucker.cxx:
	Group XrdServer objects by domain name.

2011-09-29  Matevz Tadel  <matevz.tadel@ijs.si>

	Add unique-id and username used at xrootd server to file-close
	report.

	* Glasses/XrdFileCloseReporter.cxx:
	* Glasses/XrdFileCloseReporter.h:
	Also dump unique-id and username used at xrootd server.

	* Glasses/XrdMonSucker.cxx:
	Pass username used at xrootd server when instantiating an XrdUser.

	* Glasses/XrdUser.cxx:
	* Glasses/XrdUser.h:
	Add data-member for storing username used at xrootd server:
	  TString mServerUsername;

2011-09-28  Matevz Tadel  <matevz.tadel@ijs.si>

	Improve printout formats.

	* Glasses/XrdFile.h:
	Reduce precision of Read/WriteStats in StoneOutput weed.

	* Glasses/XrdFileCloseReporter.cxx:
	Cleanup printout.

	* Glasses/XrdMonSucker.cxx:
	Add date/time info to message printout.

2011-09-27  Matevz Tadel  <matevz.tadel@ijs.si>

	Step 3 in file-close reporting.

	* Glasses/XrdFile.cxx:
	* Glasses/XrdFile.h:
	Use SRange for storing read/write trace statistics.

	* Glasses/XrdFileCloseReporter.cxx:
	* Glasses/XrdFileCloseReporter.h:
	Dump all the stuff to UDP port.
	Beautify reporter-thread management.

	* Glasses/XrdMonSucker.cxx:
	* Glasses/XrdMonSucker.h:
	Use getaddrinfo() for initial setup.
	The revfrom() call still uses ip4 structs.
	Beautify suck-thread management.

2011-09-26  Matevz Tadel  <matevz.tadel@ijs.si>

	Step 2 in file-close reporting.

	* Glasses/XrdFileCloseReporter.cxx:
	* Glasses/XrdFileCloseReporter.h:
	Add thread management and notification queue.

	* Glasses/XrdMonSucker.cxx:
	* Glasses/XrdMonSucker.h:
	Add link to XrdFileCloseReporter, call it when a file is closed.

2011-09-26  Matevz Tadel  <matevz.tadel@ijs.si>

	Prelimiary commit of file-close reporting.

	* Glasses/XrdFileCloseReporter.cxx:
	* Glasses/XrdFileCloseReporter.h:
	Proto version.

	* Glasses/XrdMonSucker.h:
	Mostly comments about handling of XrdFileCloseReporter.

	* glass.list:
	Register XrdFileCloseReporter.

2011-09-22  Matevz Tadel  <matevz.tadel@ijs.si>

	* Glasses/XrdUser.h:
	When a XrdUser disconnects, check all its files to see if they are
	open -- and close them.

	* Glasses/XrdFile.h:
	Add function Bool_t IsOpen().

	* Glasses/XrdMonSucker.cxx:
	Add function Bool_t IsConnected().

2011-09-09  Matevz Tadel  <matevz.tadel@ijs.si>

	Finalize front-line processing of xrootd monitoring streams.

	* Glasses/XrdMonSucker.cxx:
	Use new functions from XrdServer, proper dict_id de-registration.
	Lock lenses when doing direct calls on them; those should be MIRs,
	anyway.
	Make code somewhat prettier.

	* Glasses/XrdServer.cxx:
	* Glasses/XrdServer.h:
	Add new owned link:
	   ZLink<ZList> mPrevUsers;
	initialize it in AdEnlightenment() and add the following functions:
	   void DisconnectUser(XrdUser* user, Int_t dict_id);
	   void RemoveUser(XrdUser* user);
	   void RemoveFile(XrdFile* file, Int_t dict_id);
	to help managing users and files ... and their dict_id maps.

	* Glasses/XrdUser.cxx:
	Docs.

	* Glasses/XrdFile.h:
	Whitespace.

2011-09-02  Matevz Tadel  <matevz.tadel@ijs.si>

	Complete parsing of xrd monitor stream -- all information is now
	processed.

	* Glasses/XrdFile.cxx:
	* Glasses/XrdFile.h:
	* glass.list:
	New glass representing an open file in a xrd session.

	* Glasses/XrdMonSucker.cxx:
	* Glasses/XrdMonSucker.h:
	Finalize parsing of monitor stream, including IO traces.
	Use user, host & domain matching to filter out nagios probes.
	Use DN, host & domain REs to select sessions whose traces are to
	be dumped into the log.

	* Glasses/XrdServer.cxx:
	* Glasses/XrdServer.h:
	Add start, last-msg times.

	* Glasses/XrdUser.cxx:
	* Glasses/XrdUser.h:
	Add connect, disconnect, last-msg times.
	Add DN, VO and role details.

2011-06-29  Matevz Tadel  <matevz.tadel@ijs.si>

	Add start / connect time into to XrdServer and XrdUser.

	* Glasses/XrdServer.cxx:
	* Glasses/XrdServer.h:
	* Glasses/XrdUser.cxx:
	* Glasses/XrdUser.h:
	Add start-time.

	* Glasses/XrdMonSucker.cxx:
	* Glasses/XrdMonSucker.h:
	Pass start / connect time to XrdServer/User at creation time.

2011-06-24  Matevz Tadel  <matevz.tadel@ijs.si>

	Populate state with XrdServer and XrdUser lenses - this is slowly
	getting functional.

	* Glasses/CmsXrdSite.cxx:
	* Glasses/CmsXrdSite.h:
	* Glasses/CmsXrdUser.cxx:
	* Glasses/CmsXrdUser.h:
	* Glasses/XrdUser.cxx:
	* Glasses/XrdUser.h:
	New glasses - hold data about sites, users.

	* glass.list:
	Register new glasses.

	* Glasses/XrdMonSucker.cxx:
	* Glasses/XrdMonSucker.h:
	Improve reception of incoming data. Actually create XrdServer and
	XrdUser lenses to represent what is going on.

	* Glasses/XrdServer.cxx:
	* Glasses/XrdServer.h:
	Add mHost and mDomain members.

2011-06-19  Matevz Tadel  <matevz.tadel@ijs.si>

	First commit -- still incomplete.
