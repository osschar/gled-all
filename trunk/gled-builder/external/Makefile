SHELL = /bin/bash

PACKAGES := root fltk fltk-mt DevIL gts openal freealut \
            apr apr-util activemq-cpp

# Disabled packages
# ehs

all: ${PACKAGES}

# LibSets section generated by gled-make-libset-deps.pl script.

LIBSETS := GledCore Geom1 Numerica Audio1 Net1 GledGTS EHS TADemo Var1 \
           RootGeo Alice AliEnViz XrdMon Tmp1

GledCore: root fltk fltk-mt
Geom1:    GledCore DevIL
Numerica: GledCore
Audio1:   GledCore openal freealut
Net1:     GledCore
GledGTS:  GledCore Numerica gts
EHS:      GledCore
TADemo:   GledCore
Var1:     GledCore Geom1 GledGTS Numerica Audio1
RootGeo:  GledCore
Alice:    GledCore Geom1 RootGeo
AliEnViz: GledCore Geom1 Var1
XrdMon:   GledCore Net1
Tmp1:     GledCore Geom1 GledGTS

.PHONY: ${PACKAGES} ${LIBSETS} all all-but-root

# Currently disabled packages:
#
# lcms - there was really no need for it.
# DevIL:    lcms
#
# glew - used from root (or from system)

all: ${PACKAGES}

all-but-root: $(filter-out root, ${PACKAGES})

# Package dependencies

fltk-mt:  fltk

freealut: openal

apr-util: apr

activemq-cpp: apr apr-util

# Targets

${PACKAGES}:
	${MAKE} -C $@

%:
	for pkg in ${PACKAGES}; do ${MAKE} -C $$pkg $@; done
