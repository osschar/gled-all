#!/bin/bash

ALIEN=/afs/cern.ch/user/a/aliprod/.alien/software/Installation/alien

export ALIEN_USER=$USER
export ALIEN_DOMAIN=cern.ch
export GLOBUS_LOCATION=$ALIEN
export ALIEN_HOSTNAME=pcalice122
export ALIEN_HOME=$HOME/.alien
export ALIEN_ORGANISATION=Alice
export ALIEN_PERL=$ALIEN/bin/alien-perl
export GLOBUS_HOME=$ALIEN
export X509_CERT_DIR=$ALIEN/etc/alien-certs/certificates
export ALIEN_PROCESSNAME=Prompt
export GLOBUS_INSTALL_PATH=$ALIEN
export ALIEN_CA=/var/log/AliEn/CA
export ALIEN_ROOT=$ALIEN
export PERL5LIB=$ALIEN/lib/perl5/site_perl:$ALIEN/lib/perl5

PATH=$PATH:$ALIEN/bin
LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$ALIEN_ROOT/lib

export LD_LIBRARY_PATH

cmdfifo=$1
outfifo=$2

aev_ui.pl $1 $2

err=$?

if [ $err -ne 0 ]; then
  echo "Trying to report error on outfifo $outfifo."
  echo "ERR" >> $outfifo
  echo "Exec of aev_ui.pl failed." >> $outfifo
  echo "Reporting done ... or sth."
  exit 1
fi
